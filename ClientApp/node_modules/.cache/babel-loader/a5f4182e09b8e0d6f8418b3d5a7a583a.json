{"ast":null,"code":"var _jsxFileName = \"/Users/aardaisenkul/Desktop/ArdaHw/ArdaHw3/ArdaHw3/ClientApp/src/App.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport OktaAuth from '@okta/okta-auth-js';\nimport { withAuth } from '@okta/okta-react';\nimport config from '../../app.config';\nexport default withAuth(class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      sessionToken: null,\n      registered: false\n    };\n    this.oktaAuth = new OktaAuth({\n      url: config.url\n    });\n    this.checkAuthentication = this.checkAuthentication.bind(this);\n    this.checkAuthentication();\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleFirstNameChange = this.handleFirstNameChange.bind(this);\n    this.handleLastNameChange = this.handleLastNameChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n  }\n\n  async checkAuthentication() {\n    const sessionToken = await this.props.auth.getIdToken();\n\n    if (sessionToken) {\n      this.setState({\n        sessionToken\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    this.checkAuthentication();\n  }\n\n  handleFirstNameChange(e) {\n    this.setState({\n      firstName: e.target.value\n    });\n  }\n\n  handleLastNameChange(e) {\n    this.setState({\n      lastName: e.target.value\n    });\n  }\n\n  handleEmailChange(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  handlePasswordChange(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    fetch('/api/users', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(this.state)\n    }).then(user => {\n      this.setState({\n        registered: true\n      });\n    }).catch(err => console.log);\n  }\n\n  render() {\n    if (this.state.sessionToken) {\n      this.props.auth.redirect({\n        sessionToken: this.state.sessionToken\n      });\n      return null;\n    }\n\n    if (this.state.registered === true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"registration\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-element\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      id: \"email\",\n      value: this.state.email,\n      onChange: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-element\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, \"First Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"firstName\",\n      value: this.state.firstName,\n      onChange: this.handleFirstNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-element\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, \"Last Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"lastName\",\n      value: this.state.lastName,\n      onChange: this.handleLastNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-element\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"password\",\n      value: this.state.password,\n      onChange: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      id: \"submit\",\n      className: \"btn btn-primary\",\n      value: \"Register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    })));\n  }\n\n});","map":{"version":3,"sources":["/Users/aardaisenkul/Desktop/ArdaHw/ArdaHw3/ArdaHw3/ClientApp/src/App.js"],"names":["React","Redirect","OktaAuth","withAuth","config","App","Component","constructor","props","state","firstName","lastName","email","password","sessionToken","registered","oktaAuth","url","checkAuthentication","bind","handleSubmit","handleFirstNameChange","handleLastNameChange","handleEmailChange","handlePasswordChange","auth","getIdToken","setState","componentDidUpdate","e","target","value","preventDefault","fetch","method","headers","body","JSON","stringify","then","user","catch","err","console","log","render","redirect"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport OktaAuth from '@okta/okta-auth-js';\nimport { withAuth } from '@okta/okta-react';\n\nimport config from '../../app.config';\n\nexport default withAuth(class App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            firstName: '',\n            lastName: '',\n            email: '',\n            password: '',\n            sessionToken: null,\n            registered: false\n        };\n        this.oktaAuth = new OktaAuth({ url: config.url });\n        this.checkAuthentication = this.checkAuthentication.bind(this);\n        this.checkAuthentication();\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleFirstNameChange = this.handleFirstNameChange.bind(this);\n        this.handleLastNameChange = this.handleLastNameChange.bind(this);\n        this.handleEmailChange = this.handleEmailChange.bind(this);\n        this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    }\n\n    async checkAuthentication() {\n        const sessionToken = await this.props.auth.getIdToken();\n        if (sessionToken) {\n            this.setState({ sessionToken });\n        }\n    }\n\n    componentDidUpdate() {\n        this.checkAuthentication();\n    }\n\n    handleFirstNameChange(e) {\n        this.setState({ firstName: e.target.value });\n    }\n    handleLastNameChange(e) {\n        this.setState({ lastName: e.target.value });\n    }\n    handleEmailChange(e) {\n        this.setState({ email: e.target.value });\n    }\n    handlePasswordChange(e) {\n        this.setState({ password: e.target.value });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        fetch('/api/users', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(this.state)\n        }).then(user => {\n            this.setState({ registered: true });\n        })\n            .catch(err => console.log);\n    }\n\n    render() {\n        if (this.state.sessionToken) {\n            this.props.auth.redirect({ sessionToken: this.state.sessionToken });\n            return null;\n        }\n\n        if (this.state.registered === true) {\n            return <Redirect to=\"/login\" />\n        }\n\n        return (\n            <form onSubmit={this.handleSubmit} className=\"registration\">\n                <div className=\"form-element\">\n                    <label>Email:</label>\n                    <input type=\"email\" id=\"email\" value={this.state.email}\n                        onChange={this.handleEmailChange} />\n                </div>\n                <div className=\"form-element\">\n                    <label>First Name:</label>\n                    <input type=\"text\" id=\"firstName\" value={this.state.firstName}\n                        onChange={this.handleFirstNameChange} />\n                </div>\n                <div className=\"form-element\">\n                    <label>Last Name:</label>\n                    <input type=\"text\" id=\"lastName\" value={this.state.lastName}\n                        onChange={this.handleLastNameChange} />\n                </div>\n                <div className=\"form-element\">\n                    <label>Password:</label>\n                    <input type=\"password\" id=\"password\" value={this.state.password}\n                        onChange={this.handlePasswordChange} />\n                </div>\n                <div className=\"form-actions\">\n                    <input type=\"submit\" id=\"submit\" className=\"btn btn-primary\" value=\"Register\" />\n                </div>\n            </form>\n        );\n    }\n\n});"]},"metadata":{},"sourceType":"module"}